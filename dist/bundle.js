!function(e){var t={};function s(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=1)}([function(e,t,s){"use strict";s.r(t);var a=function(e){function t(e={}){this.Shape_constructor(),this.name=e.name||"sled",this.x=e.x||0,this.y=e.y||0,this.width=25,this.height=15,this.regX=e.regX||0,this.regY=e.regY||0,this.ready=!0,this.setBounds(0,0,this.width,this.height),this.graphics=this.setType("blah",this)}return t.prototype=createjs.extend(t,createjs.Shape),t.prototype.setType=function(e,t){var s=new createjs.Graphics;switch(e){case"blah":s.beginFill("#000").drawRect(0,-t.height,t.width,t.height);break;default:s.beginFill("#000").drawRect(0,-t.height,t.width,t.height)}return s},t.prototype.moveTeam=function(e){let t=this;t.ready=!1;let s=0;for(var a=0;a<t.team.length;a++){let n=t.team[a];createjs.Tween.get(n).wait(s).to({y:e},300,createjs.Ease.quadInOut).call(function(){"sled"===n.name&&(t.ready=!0)}),s+=100}},t.prototype.update=function(e){let t=this,s=7,a=-5;t.graphics.clear(),t.graphics=t.setType("blah",t),t.graphics.beginStroke("#000").setStrokeStyle(2),t.graphics.moveTo(t.width,a);for(var n=t.team.length-2;n>=0;n--){let e=t.team[n].localToGlobal(s,a),i=t.globalToLocal(e.x,e.y);t.graphics.lineTo(i.x,i.y).moveTo(i.x,i.y)}},t};var n=function(e){function t(e={}){this.Shape_constructor(),this.name=e.name||"",this.x=e.x||0,this.y=e.y||0,this.width=15,this.height=10,this.regX=e.regX||0,this.regY=e.regY||0,this.color=e.color||"#fff",this.ready=!0,this.setBounds(0,0,this.width,this.height),this.graphics.beginFill(this.color).drawRect(0,-this.height,this.width,this.height)}return t.prototype=createjs.extend(t,createjs.Shape),t.prototype.update=function(e){},t};var i=function(e){function t(e={}){console.log("obstacle()"),this.Shape_constructor(),this.name=e.name||"",this.x=e.x||0,this.y=e.y||0,this.width=25,this.height=15,this.regX=e.regX||0,this.regY=e.regY||0,this.color=e.color||"#BADA55",this.added=!1,this.type=e.type||"regular",this.graphics=this.setType(this.type,this)}return t.prototype=createjs.extend(t,createjs.Shape),t.prototype.setType=function(e,t){var s=new createjs.Graphics;switch(s.beginFill(t.color),e){case"regular":t.width=25,t.height=15,s.drawRect(0,-t.height,t.width,t.height);break;case"wide":t.width=50,t.height=15,s.drawRect(0,-t.height,t.width,t.height);break;default:s.drawRect(0,-t.height,t.width,t.height)}return t.setBounds(0,0,t.width,t.height),s},t.prototype.update=function(e,t){this.x-=t*e},t};var o=function(e,t){let s={classes:t,props:{now:null,then:null,width:500,height:300,textColor:"#333333",keycodes:{p:80,n:78,SPACE:32,LEFT:37,RIGHT:39,UP:38,DOWN:40},handlers:{onkeydown:function(){},onkeyup:function(){}}},currentRow:2,rows:[60,108,156,300*.68,252],sledTeam:[],obstacles:[],rightmostPoint:0,displayText:{fps:{},level:{}},numSleds:3,level:{current:1,baseSpeed:120,knobs:{speed:5}},pause:function(){createjs.Ticker.paused=!0},play:function(){createjs.Ticker.paused=!1},init:function(){void 0!==document.hidden?(s.hidden="hidden",s.visibilityChange="visibilitychange",s.visibilityState="visibilityState"):void 0!==document.mozHidden?(s.hidden="mozHidden",s.visibilityChange="mozvisibilitychange",s.visibilityState="mozVisibilityState"):void 0!==document.msHidden?(s.hidden="msHidden",s.visibilityChange="msvisibilitychange",s.visibilityState="msVisibilityState"):void 0!==document.webkitHidden&&(s.hidden="webkitHidden",s.visibilityChange="webkitvisibilitychange",s.visibilityState="webkitVisibilityState"),s.document_hidden=document[s.hidden],s.setup.createCanvas(e),s.state.swap("LOADING",!0),s.setup.addListeners(),s.play()},tick:function(e){!1===createjs.Ticker.paused&&(s.state.current.frame(s.updateInterval()),s.stage.update(e))},getFPS:function(e){return parseInt(createjs.Ticker.getMeasuredFPS())},updateInterval:function(){s.props.now=Date.now();var e=(s.props.now-s.props.then)/1e3;return s.props.then=s.props.now,e},state:{current:null,swap:function(e,t=!1){!0!==t&&(s.utils.resetListeners(),s.state.current.cleanup()),s.state.current=s.state[e],s.state.current.setup()},LOADING:{setup:function(e){},frame:function(e){s.state.swap("TITLE")},cleanup:function(e){}},TITLE:{setup:function(e){s.props.handlers.onkeyup=function(e){switch(e.which||e.keyCode){case s.props.keycodes.SPACE:s.state.swap("NEW_GAME");break;default:return}};var t=new createjs.Text("Some Kind of Game-type Thing","18px Arial","#ffffff");t.textAlign="center",t.x=s.canvas.width/2,t.y=s.canvas.height/2-20,t.name="title",s.stage.addChild(t);var a=new createjs.Text("Press spacebar to continue...","12px   Arial","#ffffff");a.textAlign="center",a.x=s.canvas.width/2,a.y=s.canvas.height/2+10,a.name="subtitle",s.stage.addChild(a),s.state.swap("NEW_GAME")},frame:function(e){},cleanup:function(e){s.stage.removeChild(s.stage.getChildByName("title")),s.stage.removeChild(s.stage.getChildByName("subtitle"))}},NEW_GAME:{setup:function(){let e=(new createjs.Graphics).beginFill("#fff").drawRect(0,0,s.props.width,s.props.height);s.background=new createjs.Shape(e),s.stage.addChild(s.background),s.displayText.level=new createjs.Text("Level: "+s.level.current,"24px Arial",s.props.textColor),s.displayText.level.textAlign="right",s.displayText.level.x=s.canvas.width-10,s.displayText.level.y=10,s.displayText.level.name="txtLevel",s.stage.addChild(s.displayText.level),s.displayText.sleds=new createjs.Text("Sleds: "+s.numSleds,"24px Arial",s.props.textColor),s.displayText.sleds.textAlign="right",s.displayText.sleds.x=s.canvas.width-10,s.displayText.sleds.y=40,s.displayText.sleds.name="txtSleds",s.stage.addChild(s.displayText.sleds),s.displayText.fps=new createjs.Text("","24px Arial",s.props.textColor),s.displayText.fps.textAlign="right",s.displayText.fps.x=s.canvas.width-10,s.displayText.fps.y=70,s.displayText.fps.name="txtFPS",s.stage.addChild(s.displayText.fps)},frame:function(e){s.state.swap("NEW_LEVEL")},cleanup:function(){}},NEW_LEVEL:{setup:function(){s.level.current++},frame:function(e){s.state.swap("PLAYER_START")},cleanup:function(){}},PLAYER_START:{setup:function(){s.leadDog=new t.Dog({name:"leadDog",color:"#BADA55"}),s.swingDog=new t.Dog({name:"swingDog",color:"#f00"}),s.teamDog=new t.Dog({name:"teamDog",color:"#0f0"}),s.wheelDog=new t.Dog({name:"wheelDog",color:"#00f"}),s.sled=new t.Sled({x:50,y:s.rows[s.currentRow]}),s.sledTeam=[s.leadDog,s.swingDog,s.teamDog,s.wheelDog,s.sled],s.sled.team=s.sledTeam;for(var e=s.sledTeam.length-2;e>=0;e--){let t=s.sledTeam[e],a=s.sledTeam[e+1];t.x=a.x+a.width+15,t.y=s.sled.y,s.stage.addChild(t)}s.stage.addChild(s.sled),s.teamWidth=s.leadDog.x+s.leadDog.width-s.sled.x,s.utils.addObstacleSet(s.props.width+10)},frame:function(e){s.utils.updateText(e),s.state.swap("PLAY_LEVEL")},cleanup:function(){}},PLAY_LEVEL:{setup:function(){console.log("PLAY_LEVEL.setup()"),s.props.handlers.onkeydown=function(e){switch(e.which||e.keyCode){case s.props.keycodes.p:!0===createjs.Ticker.paused?s.play():s.pause();break;case s.props.keycodes.LEFT:console.log("left");break;case s.props.keycodes.UP:console.log("up"),s.currentRow>0&&!0===s.sled.ready&&(s.currentRow--,s.sled.moveTeam(s.rows[s.currentRow]));break;case s.props.keycodes.RIGHT:console.log("right");break;case s.props.keycodes.DOWN:console.log("down",s.sled),s.currentRow<s.rows.length-1&&!0===s.sled.ready&&(s.currentRow++,s.sled.moveTeam(s.rows[s.currentRow]));break;case s.props.keycodes.SPACE:console.log("space");break;default:return}},s.props.handlers.onkeyup=function(e){switch(e.which||e.keyCode){case s.props.keycodes.UP:case s.props.keycodes.LEFT:case s.props.keycodes.RIGHT:break;default:return}}},frame:function(e){s.utils.updateText();for(var t=s.sledTeam.length-1;t>=0;t--)s.sledTeam[t].update(e);s.utils.updateObstacles(e)},cleanup:function(){console.log("---- PLAY_LEVEL.cleanup()"),s.utils.resetListeners()}},PLAYER_DIE:{setup:function(){console.log("PLAYER_DIE.setup()")},frame:function(e){console.log("-- PLAYER_DIE.frame()"),s.state.swap("GAME_OVER")},cleanup:function(){console.log("---- PLAYER_DIE.cleanup()")}},GAME_OVER:{setup:function(){console.log("GAME_OVER.setup()"),s.props.handlers.onkeyup=function(e){switch(e.which||e.keyCode){case s.props.keycodes.n:s.state.swap("TITLE");break;default:return}};var e=new createjs.Text("GAME OVER","24px Arial","#ffffff");e.textAlign="center",e.x=s.canvas.width/2,e.y=s.canvas.height/2-20,e.name="title",s.stage.addChild(e);var t=new createjs.Text("Hit the 'n' for a new game.","12px Arial","#ffffff");t.textAlign="center",t.x=s.canvas.width/2,t.y=s.canvas.height/2+10,t.name="subtitle",s.stage.addChild(t)},frame:function(e){s.utils.updateText()},cleanup:function(){console.log("---- GAME_OVER.cleanup()"),s.utils.resetListeners(),s.stage.removeAllChildren()}}}};return s};var r=e=>({createCanvas:function(t){e.canvas=document.createElement("canvas"),e.canvas.width=e.props.width,e.canvas.height=e.props.height,e.context=e.canvas.getContext("2d"),document.getElementById(t).appendChild(e.canvas),e.stage=new createjs.Stage(e.canvas),e.stage.setBounds(0,0,e.props.width,e.props.height)},addListeners:function(){document.addEventListener(e.visibilityChange,function(){e.document_hidden!==document[e.hidden]&&(document[e.hidden]?e.pause():e.play(),e.document_hidden=document[e.hidden])}),document.onkeydown=function(t){e.props.handlers.onkeydown(t||window.event),t.preventDefault()},document.onkeyup=function(t){e.props.handlers.onkeyup(t||window.event),t.preventDefault()},createjs.Ticker.on("tick",e.tick),createjs.Ticker.timingMode=createjs.Ticker.RAF}});var l=e=>{let t=e.classes;return{getRandom:function(e){return Math.floor(Math.random()*Math.floor(e))},resetListeners:function(){e.props.handlers.onkeydown=function(){},e.props.handlers.onkeyup=function(){}},updateText:function(t){createjs.Ticker.getTicks()%20==0&&(e.displayText.fps.text="FPS: "+e.getFPS(t)),e.displayText.level.text="Level: "+e.level.current},addObstacle:function(s,a,n=null){var i=new t.Obstacle({type:n,x:s,y:a});e.obstacles.push(i),e.stage.addChild(i)},addObstacleSet:function(t){let s=e.utils.getRandom(3)+1,a=[].concat(e.rows),n=[];for(var i=0;i<s;i++){let t=e.utils.getRandom(a.length);n.push(a[t]),a.splice(t,1)}for(i=0;i<n.length;i++)e.utils.addObstacle(t,n[i],"regular")},updateObstacles:function(t){if(0===e.obstacles.length)return;let s=e.level.baseSpeed+e.level.knobs.speed;e.rightmostPoint=0;for(var a=e.obstacles.length-1;a>=0;a--)if(e.obstacles[a].x<-(e.obstacles[a].width+10))e.stage.removeChild(e.obstacles[a]),e.obstacles.splice(a,1);else{e.obstacles[a].update(t,s);let n=e.obstacles[a].x+e.obstacles[a].width;n>e.rightmostPoint&&(e.rightmostPoint=n)}e.rightmostPoint<e.props.width-e.teamWidth&&e.utils.addObstacleSet(e.props.width+10)},hitTestBox:function(e,t){var s=e.getTransformedBounds(),a=t.getTransformedBounds(),n=s.x,i=a.x,o=s.x+s.width,r=a.x+a.width,l=s.y,c=a.y,d=s.y+s.height,p=a.y+a.height;return!(d<c||l>p||o<i||n>r)},hitTestDistance:function(e,t){var s=e.getTransformedBounds(),a=t.getTransformedBounds(),n=a.x+t.regX-(s.x+e.regX),i=a.y+t.regY-(s.y+e.regY);return Math.sqrt(n*n+i*i)<e.radius+t.radius},checkHits:function(){}}};var c=e=>{let t=e.classes;return{current:null,swap:function(t,s=!1){!0!==s&&(e.utils.resetListeners(),e.state.current.cleanup()),e.state.current=e.state[t],e.state.current.setup()},LOADING:{setup:function(e){},frame:function(t){e.state.swap("TITLE")},cleanup:function(e){}},TITLE:{setup:function(t){e.props.handlers.onkeyup=function(t){switch(t.which||t.keyCode){case e.props.keycodes.SPACE:e.state.swap("NEW_GAME");break;default:return}};var s=new createjs.Text("Some Kind of Game-type Thing","18px Arial","#ffffff");s.textAlign="center",s.x=e.canvas.width/2,s.y=e.canvas.height/2-20,s.name="title",e.stage.addChild(s);var a=new createjs.Text("Press spacebar to continue...","12px   Arial","#ffffff");a.textAlign="center",a.x=e.canvas.width/2,a.y=e.canvas.height/2+10,a.name="subtitle",e.stage.addChild(a),e.state.swap("NEW_GAME")},frame:function(e){},cleanup:function(t){e.stage.removeChild(e.stage.getChildByName("title")),e.stage.removeChild(e.stage.getChildByName("subtitle"))}},NEW_GAME:{setup:function(){let t=(new createjs.Graphics).beginFill("#fff").drawRect(0,0,e.props.width,e.props.height);e.background=new createjs.Shape(t),e.stage.addChild(e.background),e.displayText.level=new createjs.Text("Level: "+e.level.current,"24px Arial",e.props.textColor),e.displayText.level.textAlign="right",e.displayText.level.x=e.canvas.width-10,e.displayText.level.y=10,e.displayText.level.name="txtLevel",e.stage.addChild(e.displayText.level),e.displayText.sleds=new createjs.Text("Sleds: "+e.numSleds,"24px Arial",e.props.textColor),e.displayText.sleds.textAlign="right",e.displayText.sleds.x=e.canvas.width-10,e.displayText.sleds.y=40,e.displayText.sleds.name="txtSleds",e.stage.addChild(e.displayText.sleds),e.displayText.fps=new createjs.Text("","24px Arial",e.props.textColor),e.displayText.fps.textAlign="right",e.displayText.fps.x=e.canvas.width-10,e.displayText.fps.y=70,e.displayText.fps.name="txtFPS",e.stage.addChild(e.displayText.fps)},frame:function(t){e.state.swap("NEW_LEVEL")},cleanup:function(){}},NEW_LEVEL:{setup:function(){e.level.current++},frame:function(t){e.state.swap("PLAYER_START")},cleanup:function(){}},PLAYER_START:{setup:function(){e.leadDog=new t.Dog({name:"leadDog",color:"#BADA55"}),e.swingDog=new t.Dog({name:"swingDog",color:"#f00"}),e.teamDog=new t.Dog({name:"teamDog",color:"#0f0"}),e.wheelDog=new t.Dog({name:"wheelDog",color:"#00f"}),e.sled=new t.Sled({x:50,y:e.rows[e.currentRow]}),e.sledTeam=[e.leadDog,e.swingDog,e.teamDog,e.wheelDog,e.sled],e.sled.team=e.sledTeam;for(var s=e.sledTeam.length-2;s>=0;s--){let t=e.sledTeam[s],a=e.sledTeam[s+1];t.x=a.x+a.width+15,t.y=e.sled.y,e.stage.addChild(t)}e.stage.addChild(e.sled),e.teamWidth=e.leadDog.x+e.leadDog.width-e.sled.x,e.utils.addObstacleSet(e.props.width+10)},frame:function(t){e.utils.updateText(t),e.state.swap("PLAY_LEVEL")},cleanup:function(){}},PLAY_LEVEL:{setup:function(){console.log("PLAY_LEVEL.setup()"),e.props.handlers.onkeydown=function(t){switch(t.which||t.keyCode){case e.props.keycodes.p:!0===createjs.Ticker.paused?e.play():e.pause();break;case e.props.keycodes.LEFT:console.log("left");break;case e.props.keycodes.UP:console.log("up"),e.currentRow>0&&!0===e.sled.ready&&(e.currentRow--,e.sled.moveTeam(e.rows[e.currentRow]));break;case e.props.keycodes.RIGHT:console.log("right");break;case e.props.keycodes.DOWN:console.log("down",e.sled),e.currentRow<e.rows.length-1&&!0===e.sled.ready&&(e.currentRow++,e.sled.moveTeam(e.rows[e.currentRow]));break;case e.props.keycodes.SPACE:console.log("space");break;default:return}},e.props.handlers.onkeyup=function(t){switch(t.which||t.keyCode){case e.props.keycodes.UP:case e.props.keycodes.LEFT:case e.props.keycodes.RIGHT:break;default:return}}},frame:function(t){e.utils.updateText();for(var s=e.sledTeam.length-1;s>=0;s--)e.sledTeam[s].update(t);e.utils.updateObstacles(t)},cleanup:function(){console.log("---- PLAY_LEVEL.cleanup()"),e.utils.resetListeners()}},PLAYER_DIE:{setup:function(){console.log("PLAYER_DIE.setup()")},frame:function(t){console.log("-- PLAYER_DIE.frame()"),e.state.swap("GAME_OVER")},cleanup:function(){console.log("---- PLAYER_DIE.cleanup()")}},GAME_OVER:{setup:function(){console.log("GAME_OVER.setup()"),e.props.handlers.onkeyup=function(t){switch(t.which||t.keyCode){case e.props.keycodes.n:e.state.swap("TITLE");break;default:return}};var t=new createjs.Text("GAME OVER","24px Arial","#ffffff");t.textAlign="center",t.x=e.canvas.width/2,t.y=e.canvas.height/2-20,t.name="title",e.stage.addChild(t);var s=new createjs.Text("Hit the 'n' for a new game.","12px Arial","#ffffff");s.textAlign="center",s.x=e.canvas.width/2,s.y=e.canvas.height/2+10,s.name="subtitle",e.stage.addChild(s)},frame:function(t){e.utils.updateText()},cleanup:function(){console.log("---- GAME_OVER.cleanup()"),e.utils.resetListeners(),e.stage.removeAllChildren()}}}};let d={};d.Sled=createjs.promote(a(),"Shape"),d.Dog=createjs.promote(n(),"Shape"),d.Obstacle=createjs.promote(i(),"Shape"),window.UglyDogs=o("canvasContainer",d),Object.assign(UglyDogs,{setup:r(UglyDogs),utils:l(UglyDogs),state:c(UglyDogs)}),UglyDogs.init(),console.log(UglyDogs)},function(e,t,s){s(0),e.exports=s(6)},,,,,function(e,t){}]);